/*
 * Very simple jQuery Color Picker
 * https://github.com/tkrotoff/jquery-simplecolorpicker
 *
 * Copyright (C) 2012-2013 Tanguy Krotoff <tkrotoff@gmail.com>
 *
 * Licensed under the MIT license
 */
!function(a){"use strict";var b=function(a,b){this.init("simplecolorpicker",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e=this;e.type=b,e.$select=a(c);var f=e.$select.val();e.options=a.extend({},a.fn.simplecolorpicker.defaults,d),e.$select.hide();var g="&nbsp;&nbsp;&nbsp;&nbsp;";if(e.$colorList=null,e.options.picker){var h=e.$select.find("> option:selected").text();e.$icon=a('<span class="simplecolorpicker icon" title="'+h+'"'+' style="background-color: '+f+';"'+' role="button" tabindex="0">'+g+"</span>").insertAfter(e.$select),e.$icon.on("click."+e.type,a.proxy(e.showPicker,e)),e.$picker=a('<span class="simplecolorpicker picker"></span>').appendTo(document.body),e.$colorList=e.$picker,a(document).on("mousedown."+e.type,a.proxy(e.hidePicker,e)),e.$picker.on("mousedown."+e.type,a.proxy(e.mousedown,e))}else e.$inline=a('<span class="simplecolorpicker inline"></span>').insertAfter(e.$select),e.$colorList=e.$inline;e.$select.find("> option").each(function(){var b=a(this),c=b.val(),d=b.text(),h="";(b.prop("selected")===!0||f===c)&&(h='class="selected"');var i=a("<span "+h+' title="'+d+'"'+' style="background-color: '+c+';"'+' data-color="'+c+'"'+' role="button" tabindex="0">'+g+"</span>");e.$colorList.append(i),i.on("click."+e.type,a.proxy(e.colorSpanClicked,e))})},selectColor:function(b){var c=this,d=c.$colorList.find("> span").filter(function(){return a(this).data("color").toLowerCase()===b.toLowerCase()});d.length>0?c.selectColorSpan(d):console.error("The given color '"+b+"' could not be found")},showPicker:function(){var a=16,b=this.$icon.offset();this.$picker.css({left:b.left+this.$icon.width()/2-a,top:b.top+this.$icon.outerHeight()}),this.$picker.show(this.options.delay)},hidePicker:function(){this.$picker.hide(this.options.delay)},selectColorSpan:function(a){var b=a.data("color"),c=a.prop("title");a.siblings().removeClass("selected"),a.addClass("selected"),this.options.picker&&(this.$icon.css("background-color",b),this.$icon.prop("title",c),this.hidePicker()),this.$select.val(b)},colorSpanClicked:function(b){this.selectColorSpan(a(b.target)),this.$select.trigger("change")},mousedown:function(a){a.stopPropagation(),a.preventDefault()},destroy:function(){this.options.picker&&(this.$icon.off("."+this.type),this.$icon.remove(),a(document).off("."+this.type)),this.$colorList.off("."+this.type),this.$colorList.remove(),this.$select.removeData(this.type),this.$select.show()}},a.fn.simplecolorpicker=function(c){var d=a.makeArray(arguments);return d.shift(),this.each(function(){var e=a(this),f=e.data("simplecolorpicker"),g="object"==typeof c&&c;void 0===f&&e.data("simplecolorpicker",f=new b(this,g)),"string"==typeof c&&f[c].apply(f,d)})},a.fn.simplecolorpicker.defaults={delay:0,picker:!1}}(jQuery);